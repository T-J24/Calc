let display = document.getElementById('display');
let currentInput = '';
let operator = null; // Use null instead of empty string
let previousInput = null;

function appendToDisplay(value) {
    currentInput += value;
    display.value = currentInput;
}

function setOperator(op) {
    if (currentInput === '') return; // Prevent setting operator if no input

    if (previousInput !== null) {
        calculate(); // Calculate pending operations
    }
    operator = op;
    previousInput = parseFloat(currentInput);
    currentInput = '';
}

function calculate() {
    if (operator === null || currentInput === '' || previousInput === null) return;

    let result;
    const curr = parseFloat(currentInput);

    switch (operator) {
        case '+': result = previousInput + curr; break;
        case '-': result = previousInput - curr; break;
        case '*': result = previousInput * curr; break;
        case '/':
            if (curr === 0) {
                display.value = "Error: Division by zero";
                currentInput = '';
                previousInput = null;
                operator = null;
                return;
            }
            result = previousInput / curr;
            break;
        default: return;
    }

    display.value = result;
    currentInput = result.toString();
    previousInput = null;
    operator = null;
}

function clearDisplay() {
    currentInput = '';
    display.value = '';
    previousInput = null;
    operator = null;
}
function deleteLast(){
    currentInput = currentInput.slice(0,-1);
    display.value = currentInput;
}
